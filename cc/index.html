<!DOCTYPE html>
<!-- saved from url=(0041)http://codingchallenge.10.0.5.141.xip.io/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Miovision Coding Challenge</title><meta content="width=device-width, initial-scale=1.0" name="viewport"><link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet"><link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--><style type="text/css"></style></head><body><div class="container-fluid"><h1>Miovision Coding Challenge</h1><p>Imagine a intersection with Right Hand Side traffic where we setup 8 trip wires:</p><img src="./index_files/intersection.png"><p>Each data point has the following data</p><ul><li><code>region</code>region in the intersection of the event</li><li><code>time</code>unix time epoch of the event</li><li><code>vehicle</code>identifier for the vehicle</li></ul><p>Your goal is to produce the total number of right, straight, left and u-turn movements concatenated together. e.g if there was 1 right, 2 straight, 3 lefts and 4 u-turns the answer would be "1234" once you have your answer head to "http://codingchallenge.10.0.5.141.xip.io/ANSWER_NUMBER" to verify your answer </p><p>We've provided a  <a href="http://codingchallenge.10.0.5.141.xip.io/sample_data.json">sample dataset</a>  for you to verify you code with, the answer to this problem is "2112" </p><p>Download the  <a href="http://codingchallenge.10.0.5.141.xip.io/big_data.json">dataset</a></p><h3>Spoiler alert, solutions below...</h3><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><script src="./index_files/836dd69a7f5a70430179.js"></script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-b8c853f42bc1486a246eca98739ff795.css"><div id="gist23496570" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-cc-cpp-L1" rel="file-cc-cpp-L1">1</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-cc-cpp-LC1"><span class="pl-c">//TODO</span>
</div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179/raw/cc.cpp" style="float:right">view raw</a>
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179#file-cc-cpp">cc.cpp</a>
            hosted with ❤ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-cc-java-L1" rel="file-cc-java-L1">1</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-cc-java-LC1"><span class="pl-c">//TODO</span>
</div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179/raw/cc.java" style="float:right">view raw</a>
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179#file-cc-java">cc.java</a>
            hosted with ❤ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-cc-js-L1" rel="file-cc-js-L1">1</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-cc-js-LC1"><span class="pl-c">//TODO</span>
</div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179/raw/cc.js" style="float:right">view raw</a>
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179#file-cc-js">cc.js</a>
            hosted with ❤ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-cc-py-L1" rel="file-cc-py-L1">1</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-cc-py-LC1"><span class="pl-c">#TODO</span>
</div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179/raw/cc.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179#file-cc-py">cc.py</a>
            hosted with ❤ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-cc-rb-L1" rel="file-cc-rb-L1">1</span>
            <span class="line-number" id="file-cc-rb-L2" rel="file-cc-rb-L2">2</span>
            <span class="line-number" id="file-cc-rb-L3" rel="file-cc-rb-L3">3</span>
            <span class="line-number" id="file-cc-rb-L4" rel="file-cc-rb-L4">4</span>
            <span class="line-number" id="file-cc-rb-L5" rel="file-cc-rb-L5">5</span>
            <span class="line-number" id="file-cc-rb-L6" rel="file-cc-rb-L6">6</span>
            <span class="line-number" id="file-cc-rb-L7" rel="file-cc-rb-L7">7</span>
            <span class="line-number" id="file-cc-rb-L8" rel="file-cc-rb-L8">8</span>
            <span class="line-number" id="file-cc-rb-L9" rel="file-cc-rb-L9">9</span>
            <span class="line-number" id="file-cc-rb-L10" rel="file-cc-rb-L10">10</span>
            <span class="line-number" id="file-cc-rb-L11" rel="file-cc-rb-L11">11</span>
            <span class="line-number" id="file-cc-rb-L12" rel="file-cc-rb-L12">12</span>
            <span class="line-number" id="file-cc-rb-L13" rel="file-cc-rb-L13">13</span>
            <span class="line-number" id="file-cc-rb-L14" rel="file-cc-rb-L14">14</span>
            <span class="line-number" id="file-cc-rb-L15" rel="file-cc-rb-L15">15</span>
            <span class="line-number" id="file-cc-rb-L16" rel="file-cc-rb-L16">16</span>
            <span class="line-number" id="file-cc-rb-L17" rel="file-cc-rb-L17">17</span>
            <span class="line-number" id="file-cc-rb-L18" rel="file-cc-rb-L18">18</span>
            <span class="line-number" id="file-cc-rb-L19" rel="file-cc-rb-L19">19</span>
            <span class="line-number" id="file-cc-rb-L20" rel="file-cc-rb-L20">20</span>
            <span class="line-number" id="file-cc-rb-L21" rel="file-cc-rb-L21">21</span>
            <span class="line-number" id="file-cc-rb-L22" rel="file-cc-rb-L22">22</span>
            <span class="line-number" id="file-cc-rb-L23" rel="file-cc-rb-L23">23</span>
            <span class="line-number" id="file-cc-rb-L24" rel="file-cc-rb-L24">24</span>
            <span class="line-number" id="file-cc-rb-L25" rel="file-cc-rb-L25">25</span>
            <span class="line-number" id="file-cc-rb-L26" rel="file-cc-rb-L26">26</span>
            <span class="line-number" id="file-cc-rb-L27" rel="file-cc-rb-L27">27</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-cc-rb-LC1">data <span class="pl-k">=</span> <span class="pl-s3">JSON</span>.parse(<span class="pl-s3">File</span>.read(file))
</div><div class="line" id="file-cc-rb-LC2"><span class="pl-c">#sort the data by the time</span>
</div><div class="line" id="file-cc-rb-LC3">data.sort_by{|<span class="pl-vo">d</span>| d[<span class="pl-s1"><span class="pl-pds">'</span>time<span class="pl-pds">'</span></span>]}
</div><div class="line" id="file-cc-rb-LC4">enters <span class="pl-k">=</span> {} <span class="pl-c">#track vehicles that have currently entered the intersection</span>
</div><div class="line" id="file-cc-rb-LC5">counts <span class="pl-k">=</span> {<span class="pl-c1">r:</span><span class="pl-c1">0</span>,<span class="pl-c1">s:</span><span class="pl-c1">0</span>,<span class="pl-c1">l:</span><span class="pl-c1">0</span>,<span class="pl-c1">u:</span><span class="pl-c1">0</span>}
</div><div class="line" id="file-cc-rb-LC6"><span class="pl-c">#classify the movements (probably could do this with some arithmetic</span>
</div><div class="line" id="file-cc-rb-LC7">movements <span class="pl-k">=</span> {
</div><div class="line" id="file-cc-rb-LC8">  <span class="pl-c1">1</span> =&gt; {<span class="pl-c1">6</span> =&gt; <span class="pl-c1">:r</span>, <span class="pl-c1">7</span> =&gt; <span class="pl-c1">:s</span>, <span class="pl-c1">8</span> =&gt; <span class="pl-c1">:l</span>, <span class="pl-c1">5</span> =&gt; <span class="pl-c1">:u</span>},
</div><div class="line" id="file-cc-rb-LC9">  <span class="pl-c1">2</span> =&gt; {<span class="pl-c1">7</span> =&gt; <span class="pl-c1">:r</span>, <span class="pl-c1">8</span> =&gt; <span class="pl-c1">:s</span>, <span class="pl-c1">5</span> =&gt; <span class="pl-c1">:l</span>, <span class="pl-c1">6</span> =&gt; <span class="pl-c1">:u</span>},
</div><div class="line" id="file-cc-rb-LC10">  <span class="pl-c1">3</span> =&gt; {<span class="pl-c1">8</span> =&gt; <span class="pl-c1">:r</span>, <span class="pl-c1">5</span> =&gt; <span class="pl-c1">:s</span>, <span class="pl-c1">6</span> =&gt; <span class="pl-c1">:l</span>, <span class="pl-c1">7</span> =&gt; <span class="pl-c1">:u</span>},
</div><div class="line" id="file-cc-rb-LC11">  <span class="pl-c1">4</span> =&gt; {<span class="pl-c1">5</span> =&gt; <span class="pl-c1">:r</span>, <span class="pl-c1">6</span> =&gt; <span class="pl-c1">:s</span>, <span class="pl-c1">7</span> =&gt; <span class="pl-c1">:l</span>, <span class="pl-c1">8</span> =&gt; <span class="pl-c1">:u</span>}
</div><div class="line" id="file-cc-rb-LC12">}
</div><div class="line" id="file-cc-rb-LC13">data.each <span class="pl-k">do </span>|<span class="pl-vo">d</span>|; d <span class="pl-k">=</span> d.with_indifferent_access
</div><div class="line" id="file-cc-rb-LC14">  <span class="pl-c">#if the trip region is a 1,2,3,4 it's an enter</span>
</div><div class="line" id="file-cc-rb-LC15">  <span class="pl-k">if</span> d[<span class="pl-c1">:region</span>] <span class="pl-k">&lt;=</span> <span class="pl-c1">4</span>
</div><div class="line" id="file-cc-rb-LC16">    enters[d[<span class="pl-c1">:vehicle</span>]] <span class="pl-k">=</span> d[<span class="pl-c1">:region</span>]
</div><div class="line" id="file-cc-rb-LC17">  <span class="pl-c">#if the trip region is a 5,6,7,8 it's an exit</span>
</div><div class="line" id="file-cc-rb-LC18">  <span class="pl-k">elsif</span> d[<span class="pl-c1">:region</span>] <span class="pl-k">&gt;</span> <span class="pl-c1">4</span>
</div><div class="line" id="file-cc-rb-LC19">    enter <span class="pl-k">=</span> enters[d[<span class="pl-c1">:vehicle</span>]]
</div><div class="line" id="file-cc-rb-LC20">    <span class="pl-k">next</span> <span class="pl-k">if</span> <span class="pl-k">!</span>enter <span class="pl-c">#ignore missing events</span>
</div><div class="line" id="file-cc-rb-LC21">    movement <span class="pl-k">=</span> movements[enter][d[<span class="pl-c1">:region</span>]]
</div><div class="line" id="file-cc-rb-LC22">    counts[movement] <span class="pl-k">+=</span> <span class="pl-c1">1</span>
</div><div class="line" id="file-cc-rb-LC23">    <span class="pl-c">#delete the car out of the enters</span>
</div><div class="line" id="file-cc-rb-LC24">    enters.delete(d[<span class="pl-c1">:vehicle</span>])
</div><div class="line" id="file-cc-rb-LC25">  <span class="pl-k">end</span>
</div><div class="line" id="file-cc-rb-LC26"><span class="pl-k">end</span>
</div><div class="line" id="file-cc-rb-LC27">counts.values.join(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>)
</div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179/raw/cc.rb" style="float:right">view raw</a>
            <a href="https://gist.github.com/coreymartella/836dd69a7f5a70430179#file-cc-rb">cc.rb</a>
            hosted with ❤ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>
</div><script src="./index_files/jquery.min.js"></script><script src="./index_files/bootstrap.min.js"></script></body></html>